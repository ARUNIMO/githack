"use strict";var e=require("./motion-proxy-748ce165.js"),n=require("react");var t=0;function r(){var e=t;return t++,e}var u=function(t){var u=t.children,o=t.initial,c=t.isPresent,s=t.onExitComplete,a=t.custom,f=t.presenceAffectsLayout,l=e.useConstant(i),d=e.useConstant(r),p=n.useMemo((function(){return{id:d,initial:o,isPresent:c,custom:a,onExitComplete:function(e){l.set(e,!0);var n=!0;l.forEach((function(e){e||(n=!1)})),n&&(null==s||s())},register:function(e){return l.set(e,!1),function(){return l.delete(e)}}}}),f?void 0:[c]);return n.useMemo((function(){l.forEach((function(e,n){return l.set(n,!1)}))}),[c]),n.useEffect((function(){!c&&!l.size&&(null==s||s())}),[c]),n.createElement(e.PresenceContext.Provider,{value:p},u)};function i(){return new Map}function o(e){return e.key||""}exports.AnimatePresence=function(t){var r=t.children,i=t.custom,c=t.initial,s=void 0===c||c,a=t.onExitComplete,f=t.exitBeforeEnter,l=t.presenceAffectsLayout,d=void 0===l||l,p=function(){var t=n.useRef(!1),r=e.__read(n.useState(0),2),u=r[0],i=r[1];return e.useUnmountEffect((function(){return t.current=!0})),n.useCallback((function(){!t.current&&i(u+1)}),[u])}(),m=n.useContext(e.SharedLayoutContext);e.isSharedLayout(m)&&(p=m.forceUpdate);var v=n.useRef(!0),E=function(e){var t=[];return n.Children.forEach(e,(function(e){n.isValidElement(e)&&t.push(e)})),t}(r),h=n.useRef(E),x=n.useRef(new Map).current,y=n.useRef(new Set).current;if(function(e,n){var t="production"!==process.env.NODE_ENV?new Set:null;e.forEach((function(e){var r=o(e);"production"!==process.env.NODE_ENV&&t&&(t.has(r)&&console.warn('Children of AnimatePresence require unique keys. "'+r+'" is a duplicate.'),t.add(r)),n.set(r,e)}))}(E,x),v.current)return v.current=!1,n.createElement(n.Fragment,null,E.map((function(e){return n.createElement(u,{key:o(e),isPresent:!0,initial:!!s&&void 0,presenceAffectsLayout:d},e)})));for(var C=e.__spread(E),P=h.current.map(o),k=E.map(o),w=P.length,A=0;A<w;A++){var g=P[A];-1===k.indexOf(g)?y.add(g):y.delete(g)}return f&&y.size&&(C=[]),y.forEach((function(e){if(-1===k.indexOf(e)){var t=x.get(e);if(t){var r=P.indexOf(e);C.splice(r,0,n.createElement(u,{key:o(t),isPresent:!1,onExitComplete:function(){x.delete(e),y.delete(e);var n=h.current.findIndex((function(n){return n.key===e}));h.current.splice(n,1),y.size||(h.current=E,p(),a&&a())},custom:i,presenceAffectsLayout:d},t))}}})),C=C.map((function(e){var t=e.key;return y.has(t)?e:n.createElement(u,{key:o(e),isPresent:!0,presenceAffectsLayout:d},e)})),h.current=C,"production"!==process.env.NODE_ENV&&f&&C.length>1&&console.warn("You're attempting to animate multiple children within AnimatePresence, but its exitBeforeEnter prop is set to true. This will lead to odd visual behaviour."),n.createElement(n.Fragment,null,y.size?C:C.map((function(e){return n.cloneElement(e)})))};
//# sourceMappingURL=index-02cb955d.js.map
