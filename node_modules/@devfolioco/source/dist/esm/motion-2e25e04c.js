import{d as t,c as n,s as o,p as i,e,f as r,g as a,m as s,_ as u,h as l,j as c,k as p,l as v,n as m,o as f,q as d,A as h,r as g,t as x,v as y,w as P,M as E,a as A,x as M,u as w,y as D,z as S,V as L,B as T,C,D as b,E as k,F as V}from"./motion-proxy-0b723365.js";import{useEffect as B,useContext as j,useRef as R,Component as G,createElement as I}from"react";function H(t,n,o,i){return t.addEventListener(n,o,i),function(){return t.removeEventListener(n,o,i)}}function U(t,n,o,i){B((function(){var e=t.current;if(o&&e)return H(e,n,o,i)}),[t,n,o,i])}function F(t){return"undefined"!=typeof PointerEvent&&t instanceof PointerEvent?!("mouse"!==t.pointerType):t instanceof MouseEvent}function X(t){return!!t.touches}var Y={pageX:0,pageY:0};function z(t,n){void 0===n&&(n="page");var o=t.touches[0]||t.changedTouches[0]||Y;return{x:o[n+"X"],y:o[n+"Y"]}}function W(t,n){return void 0===n&&(n="page"),{x:t[n+"X"],y:t[n+"Y"]}}function _(t,n){return void 0===n&&(n="page"),{point:X(t)?z(t,n):W(t,n)}}function q(t){return _(t,"client")}var O=function(t,n){void 0===n&&(n=!1);var o,i=function(n){return t(n,_(n))};return n?(o=i,function(t){var n=t instanceof MouseEvent;(!n||n&&0===t.button)&&o(t)}):i},J="undefined"!=typeof window,K={pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointercancel:"mousecancel",pointerover:"mouseover",pointerout:"mouseout",pointerenter:"mouseenter",pointerleave:"mouseleave"},N={pointerdown:"touchstart",pointermove:"touchmove",pointerup:"touchend",pointercancel:"touchcancel"};function Q(t){return J&&null===window.onpointerdown?t:J&&null===window.ontouchstart?N[t]:J&&null===window.onmousedown?K[t]:t}function Z(t,n,o,i){return H(t,Q(n),O(o,"pointerdown"===n),i)}function $(t,n,o,i){return U(t,Q(n),o&&O(o,"pointerdown"===n),i)}var tt=function(){function r(e,r,s){var u=this,l=(void 0===s?{}:s).transformPagePoint;if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.updatePoint=function(){if(u.lastMoveEvent&&u.lastMoveEventInfo){var o=it(u.lastMoveEventInfo,u.history),i=null!==u.startEvent,e=t(o.offset,{x:0,y:0})>=3;if(i||e){var r=o.point,s=a().timestamp;u.history.push(n(n({},r),{timestamp:s}));var l=u.handlers,c=l.onStart,p=l.onMove;i||(c&&c(u.lastMoveEvent,o),u.startEvent=u.lastMoveEvent),p&&p(u.lastMoveEvent,o)}}},this.handlePointerMove=function(t,n){u.lastMoveEvent=t,u.lastMoveEventInfo=nt(n,u.transformPagePoint),F(t)&&0===t.buttons?u.handlePointerUp(t,n):o.update(u.updatePoint,!0)},this.handlePointerUp=function(t,n){u.end();var o=u.handlers.onEnd;if(o&&u.startEvent){var i=it(nt(n,u.transformPagePoint),u.history);o&&o(t,i)}},!(X(e)&&e.touches.length>1)){this.handlers=r,this.transformPagePoint=l;var c=nt(_(e),this.transformPagePoint),p=c.point,v=a().timestamp;this.history=[n(n({},p),{timestamp:v})];var m=r.onSessionStart;m&&m(e,it(c,this.history)),this.removeListeners=i(Z(window,"pointermove",this.handlePointerMove),Z(window,"pointerup",this.handlePointerUp),Z(window,"pointercancel",this.handlePointerUp))}}return r.prototype.updateHandlers=function(t){this.handlers=t},r.prototype.end=function(){this.removeListeners&&this.removeListeners(),e.update(this.updatePoint)},r}();function nt(t,n){return n?{point:n(t.point)}:t}function ot(t,n){return{x:t.x-n.x,y:t.y-n.y}}function it(t,n){var o=t.point;return{point:o,delta:ot(o,rt(n)),offset:ot(o,et(n)),velocity:at(n,.1)}}function et(t){return t[0]}function rt(t){return t[t.length-1]}function at(t,n){if(t.length<2)return{x:0,y:0};for(var o=t.length-1,i=null,e=rt(t);o>=0&&(i=t[o],!(e.timestamp-i.timestamp>r(n)));)o--;if(!i)return{x:0,y:0};var a=(e.timestamp-i.timestamp)/1e3;if(0===a)return{x:0,y:0};var s={x:(e.x-i.x)/a,y:(e.y-i.y)/a};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}function st(t){var n=null;return function(){return null===n&&(n=t,function(){n=null})}}var ut=st("dragHorizontal"),lt=st("dragVertical");function ct(t){var n=!1;if("y"===t)n=lt();else if("x"===t)n=ut();else{var o=ut(),i=lt();o&&i?n=function(){o(),i()}:(o&&o(),i&&i())}return n}function pt(t,n,o){var i=n.min,e=n.max;return void 0!==i&&t<i?t=o?s(i,t,o.min):Math.max(t,i):void 0!==e&&t>e&&(t=o?s(e,t,o.max):Math.min(t,e)),t}function vt(t,n,o){return{min:void 0!==n?t.min+n:void 0,max:void 0!==o?t.max+o-(t.max-t.min):void 0}}function mt(t,n){var o,i=n.min-t.min,e=n.max-t.max;return n.max-n.min<t.max-t.min&&(i=(o=u([e,i],2))[0],e=o[1]),{min:t.min+i,max:t.min+e}}function ft(t,n,o){return{min:dt(t,n),max:dt(t,o)}}function dt(t,n){var o;return"number"==typeof t?t:null!==(o=t[n])&&void 0!==o?o:0}var ht,gt=new WeakMap,xt=function(){function t(t){var n=t.visualElement;this.isDragging=!1,this.currentDirection=null,this.constraints=!1,this.elastic=l(),this.props={},this.hasMutatedConstraints=!1,this.cursorProgress={x:.5,y:.5},this.originPoint={},this.openGlobalLock=null,this.panSession=null,this.visualElement=n,this.visualElement.enableLayoutProjection(),gt.set(n,this)}return t.prototype.start=function(t,n){var o=this,i=void 0===n?{}:n,e=i.snapToCursor,r=void 0!==e&&e,a=i.cursorProgress;r&&this.snapToCursor(t);var s=this.props.transformPagePoint;this.panSession=new tt(t,{onSessionStart:function(){o.stopMotion()},onStart:function(t,n){var i,e,r,s=o.props,u=s.drag,l=s.dragPropagation;if(!u||l||(o.openGlobalLock&&o.openGlobalLock(),o.openGlobalLock=ct(u),o.openGlobalLock)){o.prepareBoundingBox(),o.visualElement.lockProjectionTarget(),o.resolveDragConstraints();var c=q(t).point;p((function(t){var n=o.visualElement.projection.target[t],i=n.min,e=n.max;o.cursorProgress[t]=a?a[t]:P(i,e,c[t]);var r=o.getAxisMotionValue(t);r&&(o.originPoint[t]=r.get())})),o.isDragging=!0,o.currentDirection=null,null===(e=(i=o.props).onDragStart)||void 0===e||e.call(i,t,n),null===(r=o.visualElement.animationState)||void 0===r||r.setActive(h.Drag,!0)}},onMove:function(t,n){var i,e,r,a,s=o.props,u=s.dragPropagation,l=s.dragDirectionLock;if(u||o.openGlobalLock){var c=n.offset;if(l&&null===o.currentDirection)return o.currentDirection=function(t,n){void 0===n&&(n=10);var o=null;Math.abs(t.y)>n?o="y":Math.abs(t.x)>n&&(o="x");return o}(c),void(null!==o.currentDirection&&(null===(e=(i=o.props).onDirectionLock)||void 0===e||e.call(i,o.currentDirection)));o.updateAxis("x",t,c),o.updateAxis("y",t,c),null===(a=(r=o.props).onDrag)||void 0===a||a.call(r,t,n),ht=t}},onEnd:function(t,n){return o.stop(t,n)}},{transformPagePoint:s})},t.prototype.prepareBoundingBox=function(){var t=this.visualElement;t.withoutTransform((function(){t.updateLayoutMeasurement()})),t.rebaseProjectionTarget(!0,t.measureViewportBox(!1))},t.prototype.resolveDragConstraints=function(){var t=this,n=this.props,o=n.dragConstraints,i=n.dragElastic;this.constraints=!!o&&(c(o)?this.resolveRefConstraints(this.visualElement.getLayoutState().layout,o):function(t,n){var o=n.top,i=n.left,e=n.bottom,r=n.right;return{x:vt(t.x,i,r),y:vt(t.y,o,e)}}(this.visualElement.getLayoutState().layout,o)),this.elastic=function(t){return!1===t?t=0:!0===t&&(t=.35),{x:ft(t,"left","right"),y:ft(t,"top","bottom")}}(i),this.constraints&&!this.hasMutatedConstraints&&p((function(n){var o,i,e;t.getAxisMotionValue(n)&&(t.constraints[n]=(o=t.visualElement.getLayoutState().layout[n],i=t.constraints[n],e={},void 0!==i.min&&(e.min=i.min-o.min),void 0!==i.max&&(e.max=i.max-o.min),e))}))},t.prototype.resolveRefConstraints=function(t,n){var o=this.props,i=o.onMeasureDragConstraints,e=o.transformPagePoint,r=n.current;v(null!==r,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop."),this.constraintsBox=m(r,e);var a=function(t,n){return{x:mt(t.x,n.x),y:mt(t.y,n.y)}}(t,this.constraintsBox);if(i){var s=i(f(a));this.hasMutatedConstraints=!!s,s&&(a=d(s))}return a},t.prototype.cancelDrag=function(){var t;this.isDragging=!1,this.panSession&&this.panSession.end(),this.panSession=null,!this.props.dragPropagation&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),null===(t=this.visualElement.animationState)||void 0===t||t.setActive(h.Drag,!1)},t.prototype.stop=function(t,n){var o;this.visualElement.unlockProjectionTarget(),null===(o=this.panSession)||void 0===o||o.end(),this.panSession=null;var i=this.isDragging;if(this.cancelDrag(),i){var e=this.props,r=e.dragMomentum,a=e.onDragEnd;if(r||this.elastic){var s=n.velocity;this.animateDragEnd(s)}null==a||a(t,n)}},t.prototype.snapToCursor=function(t){var n=this;this.prepareBoundingBox(),p((function(o){if(yt(o,n.props.drag,n.currentDirection)){var i=n.getAxisMotionValue(o);if(i){var e=q(t).point,r=n.visualElement.getLayoutState().layout,a=r[o].max-r[o].min,s=r[o].min+a/2,u=e[o]-s;n.originPoint[o]=e[o],i.set(u)}else n.cursorProgress[o]=.5,n.updateVisualElementAxis(o,t)}}))},t.prototype.updateAxis=function(t,n,o){if(yt(t,this.props.drag,this.currentDirection))return this.getAxisMotionValue(t)?this.updateAxisMotionValue(t,o):this.updateVisualElementAxis(t,n)},t.prototype.updateAxisMotionValue=function(t,n){var o=this.getAxisMotionValue(t);if(n&&o){var i=this.originPoint[t]+n[t],e=this.constraints?pt(i,this.constraints[t],this.elastic[t]):i;o.set(e)}},t.prototype.updateVisualElementAxis=function(t,n){var o,i=this.visualElement.getLayoutState().layout[t],e=i.max-i.min,r=this.cursorProgress[t],a=function(t,n,o,i,e){var r=t-n*o;return i?pt(r,i,e):r}(q(n).point[t],e,r,null===(o=this.constraints)||void 0===o?void 0:o[t],this.elastic[t]);this.visualElement.setProjectionTargetAxis(t,a,a+e)},t.prototype.setProps=function(t){var o=t.drag,i=void 0!==o&&o,e=t.dragDirectionLock,r=void 0!==e&&e,a=t.dragPropagation,s=void 0!==a&&a,u=t.dragConstraints,l=void 0!==u&&u,c=t.dragElastic,p=void 0===c?.35:c,v=t.dragMomentum,m=void 0===v||v,f=g(t,["drag","dragDirectionLock","dragPropagation","dragConstraints","dragElastic","dragMomentum"]);this.props=n({drag:i,dragDirectionLock:r,dragPropagation:s,dragConstraints:l,dragElastic:p,dragMomentum:m},f)},t.prototype.getAxisMotionValue=function(t){var n=this.props,o=n.layout,i=n.layoutId,e="_drag"+t.toUpperCase();return this.props[e]?this.props[e]:o||void 0!==i?void 0:this.visualElement.getValue(t,0)},t.prototype.animateDragEnd=function(t){var o=this,i=this.props,e=i.drag,r=i.dragMomentum,a=i.dragElastic,s=i.dragTransition,u=p((function(i){if(yt(i,e,o.currentDirection)){var u=o.constraints?o.constraints[i]:{},l=a?200:1e6,c=a?40:1e7,p=n(n({type:"inertia",velocity:r?t[i]:0,bounceStiffness:l,bounceDamping:c,timeConstant:750,restDelta:1,restSpeed:10},s),u);return o.getAxisMotionValue(i)?o.startAxisValueAnimation(i,p):o.visualElement.startLayoutAnimation(i,p)}}));return Promise.all(u).then((function(){var t,n;null===(n=(t=o.props).onDragTransitionEnd)||void 0===n||n.call(t)}))},t.prototype.stopMotion=function(){var t=this;p((function(n){var o=t.getAxisMotionValue(n);o?o.stop():t.visualElement.stopLayoutAnimation()}))},t.prototype.startAxisValueAnimation=function(t,n){var o=this.getAxisMotionValue(t);if(o){var i=o.get();return o.set(i),o.set(i),x(t,o,0,n)}},t.prototype.scalePoint=function(){var t=this,n=this.props,o=n.drag,i=n.dragConstraints;if(c(i)&&this.constraintsBox){this.stopMotion();var e={x:0,y:0};p((function(n){e[n]=y(t.visualElement.projection.target[n],t.constraintsBox[n])})),this.prepareBoundingBox(),this.resolveDragConstraints(),p((function(n){if(yt(n,o,null)){var i=function(t,n,o){var i=t.max-t.min,e=s(n.min,n.max-i,o);return{min:e,max:e+i}}(t.visualElement.projection.target[n],t.constraintsBox[n],e[n]),r=i.min,a=i.max;t.visualElement.setProjectionTargetAxis(n,r,a)}}))}},t.prototype.mount=function(t){var n=this,o=Z(t.getInstance(),"pointerdown",(function(t){var o=n.props,i=o.drag,e=o.dragListener;i&&(void 0===e||e)&&n.start(t)})),i=H(window,"resize",(function(){n.scalePoint()})),e=t.onLayoutUpdate((function(){n.isDragging&&n.resolveDragConstraints()})),r=t.prevDragCursor;return r&&this.start(ht,{cursorProgress:r}),function(){null==o||o(),null==i||i(),null==e||e(),n.cancelDrag()}},t}();function yt(t,n,o){return!(!0!==n&&n!==t||null!==o&&o!==t)}var Pt=M((function(t){var o=t.visualElement;return function(t,o){var i=t.dragControls,e=j(E).transformPagePoint,r=A((function(){return new xt({visualElement:o})}));r.setProps(n(n({},t),{transformPagePoint:e})),B((function(){return i&&i.subscribe(r)}),[r]),B((function(){return r.mount(o)}),[])}(g(t,["visualElement"]),o)})),Et={key:"drag",shouldRender:function(t){return!!t.drag||!!t.dragControls},getComponent:function(){return Pt}};var At=function(t,n){return!!n&&(t===n||At(t,n.parentElement))};function Mt(t,n){var o=t.onTap,e=t.onTapStart,r=t.onTapCancel,a=t.whileTap,s=o||e||r||a,u=R(!1),l=R(null);function c(){var t;null===(t=l.current)||void 0===t||t.call(l),l.current=null}function p(){var t,o;return c(),u.current=!1,null===(t=n.animationState)||void 0===t||t.setActive(h.Tap,!1),!(!(o=ct(!0))||(o(),0))}function v(t,i){p()&&(At(n.getInstance(),t.target)?null==o||o(t,i):null==r||r(t,i))}function m(t,n){p()&&(null==r||r(t,n))}$(n,"pointerdown",s?function(t,o){var r;c(),u.current||(u.current=!0,l.current=i(Z(window,"pointerup",v),Z(window,"pointercancel",m)),null==e||e(t,o),null===(r=n.animationState)||void 0===r||r.setActive(h.Tap,!0))}:void 0),w(c)}function wt(t,n,o){return function(i,e){var r;F(i)&&t.isHoverEventsEnabled&&(null==o||o(i,e),null===(r=t.animationState)||void 0===r||r.setActive(h.Hover,n))}}function Dt(t,n){var o,i,e,r,a,s,u,l,c,p;i=n,e=(o=t).onPan,r=o.onPanStart,a=o.onPanEnd,s=o.onPanSessionStart,u=e||r||a||s,l=R(null),c=j(E).transformPagePoint,p={onSessionStart:s,onStart:r,onMove:e,onEnd:function(t,n){l.current=null,a&&a(t,n)}},B((function(){null!==l.current&&l.current.updateHandlers(p)})),$(i,"pointerdown",u&&function(t){l.current=new tt(t,p,{transformPagePoint:c})}),w((function(){return l.current&&l.current.end()})),Mt(t,n),function(t,n){var o=t.onHoverStart,i=t.onHoverEnd,e=t.whileHover;$(n,"pointerenter",o||e?wt(n,!0,o):void 0),$(n,"pointerleave",i||e?wt(n,!1,i):void 0)}(t,n),function(t,n){var o=t.whileFocus;U(n,"focus",o?function(){var t;null===(t=n.animationState)||void 0===t||t.setActive(h.Focus,!0)}:void 0),U(n,"blur",o?function(){var t;null===(t=n.animationState)||void 0===t||t.setActive(h.Focus,!1)}:void 0)}(t,n)}var St=M((function(t){var n=t.visualElement;Dt(g(t,["visualElement"]),n)})),Lt={key:"gestures",shouldRender:function(t){return D.some((function(n){return t.hasOwnProperty(n)}))},getComponent:function(){return St}};var Tt=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.frameTarget={x:{min:0,max:0},y:{min:0,max:0}},n.stopAxisAnimation={x:void 0,y:void 0},n.isAnimatingTree=!1,n.animate=function(t,o,i){void 0===i&&(i={});var e=i.originBox,r=i.targetBox,a=i.visibilityAction,s=i.shouldStackAnimate,u=i.onComplete,l=g(i,["originBox","targetBox","visibilityAction","shouldStackAnimate","onComplete"]),c=n.props,v=c.visualElement,m=c.layout;if(!1===s)return n.isAnimatingTree=!1,n.safeToRemove();if(!n.isAnimatingTree||!0===s){s&&(n.isAnimatingTree=!0);var f=bt(o=e||o,t=r||t),d=p((function(i){if("position"===m){var e=t[i].max-t[i].min;o[i].max=o[i].min+e}if(!v.projection.isTargetLocked)return void 0===a?f?n.animateAxis(i,t[i],o[i],l):v.setProjectionTargetAxis(i,t[i].min,t[i].max):void v.setVisibility(a===L.Show)}));return v.syncRender(),Promise.all(d).then((function(){n.isAnimatingTree=!1,u&&u(),v.notifyLayoutAnimationComplete()}))}},n}return S(n,t),n.prototype.componentDidMount=function(){var t=this,n=this.props.visualElement;n.animateMotionValue=x,n.enableLayoutProjection(),this.unsubLayoutReady=n.onLayoutUpdate(this.animate),n.layoutSafeToRemove=function(){return t.safeToRemove()}},n.prototype.componentWillUnmount=function(){var t=this;this.unsubLayoutReady(),p((function(n){var o,i;return null===(i=(o=t.stopAxisAnimation)[n])||void 0===i?void 0:i.call(o)}))},n.prototype.animateAxis=function(t,n,o,i){var e,r,a=(void 0===i?{}:i).transition;null===(r=(e=this.stopAxisAnimation)[t])||void 0===r||r.call(e);var u=this.props.visualElement,l=this.frameTarget[t],c=u.getProjectionAnimationProgress()[t];c.clearListeners(),c.set(0),c.set(0);var p=function(){var i=c.get()/1e3;!function(t,n,o,i){t.min=s(n.min,o.min,i),t.max=s(n.max,o.max,i)}(l,o,n,i),u.setProjectionTargetAxis(t,l.min,l.max)};p(),u.updateLayoutProjection();var v=c.onChange(p),m=x("x"===t?"layoutX":"layoutY",c,1e3,a||this.props.transition||jt).then(v);return this.stopAxisAnimation[t]=function(){c.stop(),v()},m},n.prototype.safeToRemove=function(){var t,n;null===(n=(t=this.props).safeToRemove)||void 0===n||n.call(t)},n.prototype.render=function(){return null},n}(G);function Ct(t){var o=u(T(),2)[1];return I(Tt,n({},t,{safeToRemove:o}))}function bt(t,n){return!(Vt(t)||Vt(n)||Bt(t.x,n.x)&&Bt(t.y,n.y))}var kt={min:0,max:0};function Vt(t){return Bt(t.x,kt)&&Bt(t.y,kt)}function Bt(t,n){return t.min===n.min&&t.max===n.max}var jt={duration:.45,ease:[.4,0,.1,1]},Rt=C([b,k,Et,Lt,V,{key:"animate-layout",shouldRender:function(t){return!!t.layout||void 0!==t.layoutId},getComponent:function(){return Ct}}]);export{Rt as m};
//# sourceMappingURL=motion-2e25e04c.js.map
