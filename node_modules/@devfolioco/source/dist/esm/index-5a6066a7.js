import{_ as e,u as n,a as t,P as r,S as i,i as o,b as u}from"./motion-proxy-0b723365.js";import{useCallback as c,useRef as a,useState as s,useMemo as f,useEffect as l,createElement as p,useContext as d,Fragment as v,cloneElement as m,Children as h,isValidElement as E}from"react";var y=0;function x(){var e=y;return y++,e}var P=function(e){var n=e.children,i=e.initial,o=e.isPresent,u=e.onExitComplete,c=e.custom,a=e.presenceAffectsLayout,s=t(w),d=t(x),v=f((function(){return{id:d,initial:i,isPresent:o,custom:c,onExitComplete:function(e){s.set(e,!0);var n=!0;s.forEach((function(e){e||(n=!1)})),n&&(null==u||u())},register:function(e){return s.set(e,!1),function(){return s.delete(e)}}}}),a?void 0:[o]);return f((function(){s.forEach((function(e,n){return s.set(n,!1)}))}),[o]),l((function(){!o&&!s.size&&(null==u||u())}),[o]),p(r.Provider,{value:v},n)};function w(){return new Map}function A(e){return e.key||""}var k=function(t){var r=t.children,f=t.custom,l=t.initial,y=void 0===l||l,x=t.onExitComplete,w=t.exitBeforeEnter,k=t.presenceAffectsLayout,N=void 0===k||k,O=function(){var t=a(!1),r=e(s(0),2),i=r[0],o=r[1];return n((function(){return t.current=!0})),c((function(){!t.current&&o(i+1)}),[i])}(),g=d(i);o(g)&&(O=g.forceUpdate);var C=a(!0),L=function(e){var n=[];return h.forEach(e,(function(e){E(e)&&n.push(e)})),n}(r),b=a(L),z=a(new Map).current,_=a(new Set).current;if(function(e,n){var t="production"!==process.env.NODE_ENV?new Set:null;e.forEach((function(e){var r=A(e);"production"!==process.env.NODE_ENV&&t&&(t.has(r)&&console.warn('Children of AnimatePresence require unique keys. "'+r+'" is a duplicate.'),t.add(r)),n.set(r,e)}))}(L,z),C.current)return C.current=!1,p(v,null,L.map((function(e){return p(P,{key:A(e),isPresent:!0,initial:!!y&&void 0,presenceAffectsLayout:N},e)})));for(var D=u(L),S=b.current.map(A),V=L.map(A),q=S.length,B=0;B<q;B++){var M=S[B];-1===V.indexOf(M)?_.add(M):_.delete(M)}return w&&_.size&&(D=[]),_.forEach((function(e){if(-1===V.indexOf(e)){var n=z.get(e);if(n){var t=S.indexOf(e);D.splice(t,0,p(P,{key:A(n),isPresent:!1,onExitComplete:function(){z.delete(e),_.delete(e);var n=b.current.findIndex((function(n){return n.key===e}));b.current.splice(n,1),_.size||(b.current=L,O(),x&&x())},custom:f,presenceAffectsLayout:N},n))}}})),D=D.map((function(e){var n=e.key;return _.has(n)?e:p(P,{key:A(e),isPresent:!0,presenceAffectsLayout:N},e)})),b.current=D,"production"!==process.env.NODE_ENV&&w&&D.length>1&&console.warn("You're attempting to animate multiple children within AnimatePresence, but its exitBeforeEnter prop is set to true. This will lead to odd visual behaviour."),p(v,null,_.size?D:D.map((function(e){return m(e)})))};export{k as A};
//# sourceMappingURL=index-5a6066a7.js.map
